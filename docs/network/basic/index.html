<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="HonjayChang Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="HonjayChang Blog Atom Feed"><title data-react-helmet="true">计网 | HonjayChang</title><meta data-react-helmet="true" property="og:url" content="https://honjaychang.github.io//docs/network/basic"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="计网 | HonjayChang"><meta data-react-helmet="true" name="description" content="TCP 和 UDP 的区别"><meta data-react-helmet="true" property="og:description" content="TCP 和 UDP 的区别"><link data-react-helmet="true" rel="shortcut icon" href="/img/photo.ico"><link data-react-helmet="true" rel="canonical" href="https://honjaychang.github.io//docs/network/basic"><link data-react-helmet="true" rel="alternate" href="https://honjaychang.github.io//docs/network/basic" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://honjaychang.github.io//docs/network/basic" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a08d23d3.css">
<link rel="preload" href="/assets/js/runtime~main.406cbef9.js" as="script">
<link rel="preload" href="/assets/js/main.53a30771.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP shadow--md">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/photo.jpg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/photo.jpg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Honjay</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/hc/html">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Honjaychang" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/photo.jpg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/photo.jpg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Honjay</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/hc/html">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/Honjaychang" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">HC</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/hc/html">HTML</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/hc/css">CSS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">JS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/js/basic">JS 基础</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/js/advanced">JS 进阶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/js/dataStructure">JS 数据结构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/js/module">模块化</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/js/reg">正则</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Extension</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extension/web-api">Web-API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extension/http-browser">HTTP-Browser</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">TS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts/basic">basic</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">React</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/react/basic">React</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Dev</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/dev/git">GIT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/dev/node">Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/dev/os">操作系统</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/dev/webpack">WebPack</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Network</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/network/basic">计网</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Algo</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/algo/basic">数据结构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/algo/sort">排序</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/algo/sword">sword</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/algo/tree">树</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Interview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interview/hand">各种手写</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/interview/scene">场景题</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Vue</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/vue/basic">basic</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">计网</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tcp-和-udp-的区别"></a>TCP 和 UDP 的区别<a class="hash-link" href="#tcp-和-udp-的区别" title="Direct link to heading">#</a></h2><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="连接方面"></a>连接方面<a class="hash-link" href="#连接方面" title="Direct link to heading">#</a></h5><ul><li>TCP 面向连接，UDP 不需要连接</li><li>TCP 需要三次握手四次挥手请求连接 <a href="https://segmentfault.com/a/1190000018592072" target="_blank" rel="noopener noreferrer">TCP 是如何实现可靠连接的？</a><ul><li>超时重传</li></ul></li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="可靠性"></a>可靠性<a class="hash-link" href="#可靠性" title="Direct link to heading">#</a></h5><ul><li>TCP 是可靠传输；一旦传输过程中丢包的话会进行重传</li><li>UDP 是不可靠传输，但会最大努力交付</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="工作效率"></a>工作效率<a class="hash-link" href="#工作效率" title="Direct link to heading">#</a></h5><ul><li>UDP 实时性高，比 TCP 工作效率高</li><li>因为不需要建立连接，更不需要复杂的握手挥手以及复杂的算法，也没有 4 重传机制</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="是否支持多对多"></a>是否支持多对多<a class="hash-link" href="#是否支持多对多" title="Direct link to heading">#</a></h5><ul><li>TCP 是点对点的</li><li>UDP 支持一对一，一对多，多对多</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="首部大小"></a>首部大小<a class="hash-link" href="#首部大小" title="Direct link to heading">#</a></h5><ul><li>TCP 首部占 20 字节</li><li>UDP 首部占 8 字节，首部开销小。同样的报文内容，UDP 会比 TCP 更高效。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="三次握手四次挥手"></a>三次握手四次挥手<a class="hash-link" href="#三次握手四次挥手" title="Direct link to heading">#</a></h2><ul><li><code>SYN(Synchronize) 同步</code> <code>ACK 确认</code></li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="三次握手"></a>三次握手<a class="hash-link" href="#三次握手" title="Direct link to heading">#</a></h5><p><img src="https://cdn.jsdelivr.net/gh/honjaychang/icopicture/blog/image-20210312214207519.png" alt="三次握手"></p><p><strong>实质</strong>：客户端连接服务器指定端口 建立 TCP 连接，并同步双方的序列号和确认号，交换<code>TCP窗口大小</code>信息</p><ul><li>服务端调用<code>listen</code>系统命令，进入监听状态，等待客户端的连接。</li><li>客户端向服务端发送<code>连接请求报文</code>，其中 TCP 标志位里<code>SYN=1，ACK=0</code>，选择一个初始的序号<code>x</code>。</li><li>服务端收到请求报文，向 客户端 发送 <code>连接确认报文</code> ，<code>SYN=1，ACK=1</code>，确认号为 <code>x+1</code>，同时也选择一个初始的序号<code> y</code>。</li><li>客户端 收到 服务端的连接确认报文后，还要向 服务端 <code>发出确认</code>，确认号为 <code>y+1</code>，序号为 <code>x+1</code>。</li><li>服务端 收到 客户端 的确认后，<code>连接建立</code>。</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="四次挥手"></a>四次挥手<a class="hash-link" href="#四次挥手" title="Direct link to heading">#</a></h5><p><img src="https://cdn.jsdelivr.net/gh/honjaychang/icopicture/blog/image-20210312214227886.png" alt="四次挥手"></p><ul><li>当主动方关闭连接时，会发送 <code>FIN</code> 报文，此时主动方的连接状态由 <code>ESTABLISHED</code> 变为 <code>FIN_WAIT1</code>。当被动方收到 <code>FIN</code> 报文后，内核自动回复 <code>ACK</code> 报文，连接状态由 <code>ESTABLISHED</code> 变为 <code>CLOSE_WAIT</code>，顾名思义，它在等待进程调用 <code>close</code> 函数关闭连接。当主动方接收到这个 <code>ACK</code> 报文后，连接状态由 <code>FIN_WAIT1</code> 变为 <code>FIN_WAIT2</code>，主动方的发送通道就关闭了。</li><li>再来看被动方的发送通道是如何关闭的。当被动方进入 <code>CLOSE_WAIT</code> 状态时，进程的 <code>read</code> 函数会返回 0，这样开发人员就会有针对性地调用 <code>close 函数</code>，进而触发内核发送 <code>FIN</code> 报文，此时被动方连接的状态变为 <code>LAST_ACK</code>。当主动方收到这个 <code>FIN</code> 报文时，内核会自动回复 <code>ACK</code>，同时连接的状态由 <code>FIN_WAIT2</code> 变为 <code>TIME_WAIT</code>，<code>Linux</code> 系统下大约 <code>1 分钟</code>后 TIME_WAIT 状态的连接才会彻底关闭。而被动方收到 <code>ACK</code> 报文后，连接就会关闭。</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">那为什么需要三次握手，四次挥手呢？</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain">次握手的作用就是双方都能明确自己和对方的收、发能力是正常的，三次连接是保证可靠性的最小握手次数。</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain">次挥手呐，</span><span class="token constant" style="color:#36acaa">TCP</span><span class="token plain">的全双工通信断开连接，需要双方的都确认断开。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    当客户端确认自己没有数据要传给服务器时，并不能保证服务器也没有数据要发送了</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  前两次挥手是客户端和服务器对连接断开的确认</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  第三次服务器会将剩下的数据发给客户端</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Ref</h5></div><div class="admonition-content"><ul><li>图源：博客 <a href="https://blog.csdn.net/qzcsu/article/details/72861891" target="_blank" rel="noopener noreferrer">两张动图-彻底明白 TCP 的三次握手与四次挥手</a></li><li><a href="https://yuanrengu.com/2020/77eef79f.html" target="_blank" rel="noopener noreferrer">面试官，不要再问我三次握手和四次挥手</a></li><li><a href="https://mp.weixin.qq.com/s/tH8RFmjrveOmgLvk9hmrkw" target="_blank" rel="noopener noreferrer">硬不硬你说了算！近 40 张图解被问千百遍的 TCP 三次握手和四次挥手面试题</a></li><li><a href="https://zhuanlan.zhihu.com/p/108822858" target="_blank" rel="noopener noreferrer">一文搞定 UDP 和 TCP 高频面试题！</a></li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="osi-七层模型"></a>OSI 七层模型<a class="hash-link" href="#osi-七层模型" title="Direct link to heading">#</a></h2><ul><li>TCP 属于传输层</li><li>发送数据是封装过程 接收则是解封装</li></ul><p><img src="HTTPs://cdn.jsdelivr.net/gh/honjaychang/icopicture/blog/image-20210312132823375.png" alt="OSI 七层模型"></p><ul><li>物理层：利用物理传输介质为数据链路层提供物理连接，实现比特流的透明传输</li><li>数据链路层：<ul><li>交换机 帧（帧是放置数据的、逻辑的、结构化的包</li><li>将来自物理层的原始数据进行 MAC 地址的封装与解封装</li><li>点到点传输</li></ul></li><li>网络层：<ul><li>ARP：地址解析协议</li><li>路由器 数据包分组</li><li>将数据链路层的数据进行 IP 地址的封装与解封装</li><li>IP 地址寻址问题 路由算法：确定从源结点沿着网络到目的结点的路由选择</li><li>数据链路层是解决同一网络内节点之间的通信，而网络层主要解决不同子网间的通信</li></ul></li><li>传输层：<ul><li>定义传输数据的协议和端口 TCP UDP</li><li>将从下层接收的数据进行分段和传输，到达目的地址后再进行重组</li><li>向用户提供可靠的、透明的、端到端的数据传输，以及差错控制和流量控制机制</li><li><a href="https://blog.csdn.net/weixin_43914604/article/details/105531547?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&amp;spm=1001.2101.3001.4242" target="_blank" rel="noopener noreferrer">TCP 流量控制</a></li></ul></li><li>会话层：<ul><li>会话层建立、管理和终止应用程序进程之间的会话和数据交换</li></ul></li><li>表示层<ul><li>主要是进行对接收的数据进行解释、加密与解密、压缩与解压缩等</li></ul></li><li>应用层<ul><li>终端应用</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="https--http"></a>HTTPS &amp; HTTP<a class="hash-link" href="#https--http" title="Direct link to heading">#</a></h2><p>HTTP：无状态<code>(stateless)</code>协议。HTTP 协议自身不对请求和响应之间的通信状态进行保存。即协议对于发送过的请求或响应都不做持久化处理</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="区别"></a>区别<a class="hash-link" href="#区别" title="Direct link to heading">#</a></h4><ul><li><code>HTTP</code>：无状态无连接，而且是明文传输，不安全 80</li><li><code>HTTPS</code>：传输内容加密，身份验证，保证数据完整性 <code>HTTP + SSL/TLS</code> 443</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="http-的不足"></a>HTTP 的不足<a class="hash-link" href="#http-的不足" title="Direct link to heading">#</a></h5><ul><li>通信使用明文，内容可能会被窃听 -&gt; 通信加密 <del>数据加密</del></li><li>不验证通信方的身份，因此有可能遭遇伪装 -&gt; <code>SSL HTTPS</code> 数字证书</li><li>无法证明报文的完整性，所以有可能已遭篡改 -&gt; 中间人攻击 MD5 数字签名</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="完整性检测---数字签名"></a>完整性检测 - 数字签名<a class="hash-link" href="#完整性检测---数字签名" title="Direct link to heading">#</a></h5><ul><li>将一段文本通过<code>hash</code>函数生成消息摘要，再通过客户端的私钥进行加密生成数字签名</li><li>服务器收到数字签名后先用公钥进行解密 得到消息摘要<ul><li>然后对收到的原文也进行<code>hash</code>生成消息摘要</li><li>比较前后两次消息摘要 如果相同 则证明完整没有被篡改</li></ul></li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="数字证书"></a>数字证书<a class="hash-link" href="#数字证书" title="Direct link to heading">#</a></h5><ul><li>解决通信身份可能被伪装问题</li><li>服务器运营人员向第三方证书机构提交 CA 公钥、组织信息、域名等信息进行申请认证</li><li>数字证书机构通过线上线下等手段去验证所提供的信息是否合法。合法的话会向申请者颁发证书（包含 CA 公钥、证书机构和所有者组织信息、证书有效时间、序列号等信息，还包含一个签名（使用散列函数计算公开明文的消息摘要并通过 CA 的私钥进行加密 =&gt; 签名</li><li>客户端向目标服务器发起请求时会返回相应的证书文件</li><li>客户端读取证书中信息，进行相同的散列函数计算得到消息摘要。通过 CA 中的公钥解密签名数据，对比证书的消息摘要是否一致来判断是否合法</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="https-实现原理"></a>HTTPS 实现原理<a class="hash-link" href="#https-实现原理" title="Direct link to heading">#</a></h4><p><strong>HTTP +</strong> 加密 <strong>+</strong> 认证 <strong>+</strong> 完整性保护 = <strong>HTTPS</strong></p><ul><li><p>过程</p><ul><li>客户端发送消息给服务器（包含可用的加密算法和压缩算法</li><li>服务器返回消息给客户端（包含选用的加密和压缩算法以及数字证书认证机构 CA 签发的证书（包含公钥 + 证书所应用的域名范围</li><li>客户端去验证公钥证书 是否合法</li><li>客户端使用伪随机数生成传输信息所用的对称密钥，然后通过证书的公钥去传输对称密钥</li><li>服务端接收到信息后，用自己的私钥去解密来获得对称密钥</li><li>服务端使用对称密钥与客户端进行通信（此时双方都已经拥有了对称密钥</li></ul></li><li><p>SSL 公钥加密的算法</p><ul><li>对称加密的问题：密钥分发的问题 安全性问题</li></ul></li><li><p>HTTPS 采用 共享密钥(对称加密) 和 公开密钥(非对称加密)两者混用的加密机制</p><ul><li>非对称：交换对称密钥</li><li>对称：信息交换</li></ul></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Ref</h5></div><div class="admonition-content"><ul><li><a href="https://juejin.cn/post/6844903830916694030" target="_blank" rel="noopener noreferrer">深入理解 HTTPS 工作原理</a></li><li><a href="https://cloud.tencent.com/developer/article/1005197" target="_blank" rel="noopener noreferrer">深入浅出 HTTPS 工作原理</a></li></ul></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="http-版本"></a>HTTP 版本<a class="hash-link" href="#http-版本" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">使用长连接之后，客户端、服务端怎么知道本次传输结束呢？两部分：</span><span class="token number" style="color:#36acaa">1.</span><span class="token plain"> 判断传输数据是否达到了Content</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Length</span><span class="token plain"> 指示的大小；</span><span class="token number" style="color:#36acaa">2.</span><span class="token plain"> 动态生成的文件没有 </span><span class="token maybe-class-name">Content</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Length</span><span class="token plain"> ，它是分块传输（chunked），这时候就要根据 chunked 编码来判断，chunked 编码的数据在最后有一个空 chunked 块，表明本次传输数据结束，</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>HTTP/0.9：只能进行<code>get</code>请求，发送纯文本</li><li>HTTP/1.0：添加了<code>POST、HEAD、OPTION、PUT、DELETE</code>等</li><li>HTTP/1.1：<ul><li>默认支持了长连接<code>keep-alive</code>：旨在建立 <strong>1</strong> 次 <strong>TCP</strong> 连接后进行多次请求和响应的交互 <code>Keep-Alive: timeout=5, max=100</code></li><li>管线化：不用等待响应亦可直接发送下一个请求，就能够做到同时并行发送多个请求</li><li>虽然是无状态协议，但为了实现期望的保持状态功能，于是引入了 <code>Cookie</code> 技术（通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态</li><li>增加了<code>host</code> 域，而且节约带宽?</li></ul></li><li>HTTP/2：<ul><li>多路复用：让所有的通信都在一个 TCP 连接上完成，实现了请求的并发</li><li>头部压缩：利用 HPACK 算法压缩头部的<code>User-Agent Cookie Accept Server Rabge</code>等字段</li><li>服务器推送：使得服务器可以预测客户端需要的资源，主动推送到客户端</li></ul></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Ref</h5></div><div class="admonition-content"><ul><li><a href="https://g.yuque.com/kougazhang/network/ccyd8g" target="_blank" rel="noopener noreferrer">简介: http/https/http2</a></li><li><a href="https://blog.51cto.com/12118369/1962662" target="_blank" rel="noopener noreferrer">http1.0，http1.1 和 http2.0 的区别</a></li></ul></div></div><p><code>cookie</code> 是存储在浏览器的小段文本，会在浏览器每次向同一服务器再发起请求时被携带并发送到服务 器上。我们可以把状态信息放在<code>cookie</code>里，带给服务器。</p><p><code>session</code> 是存储在服务器的用户数据。浏览器第一次向服务器发起请求时，服务器会为当前会话创建一个 <code>session</code>，并且把对应的 <code>session-id</code> 写入 <code>cookie</code> 中，用来标识 <code>session</code>。此后，每次用户的请求都会携带 一个包含了 <code>session-id</code> 的 <code>cookie</code>，服务器解析出了 <code>session-id</code>，便能定位到用户的用户信息。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="浏览器输入网址到页面渲染全过程"></a>浏览器输入网址到页面渲染全过程<a class="hash-link" href="#浏览器输入网址到页面渲染全过程" title="Direct link to heading">#</a></h2><ul><li>DNS 解析：域名解析为 IP 地址<ul><li>缓存命中</li></ul></li><li>浏览器缓存 =&gt; 系统缓存 =&gt; 路由器缓存 =&gt; <code>ISP</code>服务器缓存 =&gt; 根域名服务器缓存 =&gt; 顶级域名服务器缓存 =&gt; 主域名服务器缓存</li><li>TCP 连接：三次握手</li><li>发送 HTTP 请求</li><li>服务器处理请求 并 返回 HTTP 响应报文</li><li>浏览器解析渲染页面：<code>HTML、CSS、JS</code>文件</li><li><code>DOM Tree + CSSOM =&gt; Render Tree =&gt; JS =&gt; Render Tree</code></li><li>连接结束</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Ref</h5></div><div class="admonition-content"><ul><li><a href="https://segmentfault.com/a/1190000006879700" target="_blank" rel="noopener noreferrer">前端经典面试题: 从输入 URL 到页面加载发生了什么？</a></li><li><a href="https://blog.fundebug.com/2019/02/28/what-happens-from-url-to-webpage/" target="_blank" rel="noopener noreferrer">经典面试题：从 URL 输入到页面展现到底发生什么？</a></li></ul></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/dev/webpack"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« WebPack</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/algo/basic"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">数据结构 »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tcp-和-udp-的区别" class="table-of-contents__link">TCP 和 UDP 的区别</a></li><li><a href="#三次握手四次挥手" class="table-of-contents__link">三次握手四次挥手</a></li><li><a href="#osi-七层模型" class="table-of-contents__link">OSI 七层模型</a></li><li><a href="#https--http" class="table-of-contents__link">HTTPS &amp; HTTP</a></li><li><a href="#浏览器输入网址到页面渲染全过程" class="table-of-contents__link">浏览器输入网址到页面渲染全过程</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Honjaychang</div></div></div></footer></div>
<script src="/assets/js/runtime~main.406cbef9.js"></script>
<script src="/assets/js/main.53a30771.js"></script>
</body>
</html>