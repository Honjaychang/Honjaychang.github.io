"use strict";(self.webpackChunkmy_test=self.webpackChunkmy_test||[]).push([[5868],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),d=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=d(n),m=a,k=u["".concat(l,".").concat(m)]||u[m]||s[m]||r;return n?o.createElement(k,i(i({ref:t},c),{},{components:n})):o.createElement(k,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:a,i[1]=p;for(var d=2;d<r;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5538:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return p},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return c},default:function(){return u}});var o=n(7462),a=n(3366),r=(n(7294),n(3905)),i=["components"],p={},l="Redux",d={unversionedId:"react/redux",id:"react/redux",isDocsHomePage:!1,title:"Redux",description:"\u56fe\u96c0\u793e\u533a",source:"@site/docs/react/redux.md",sourceDirName:"react",slug:"/react/redux",permalink:"/docs/react/redux",version:"current",frontMatter:{},sidebar:"docs",previous:{title:"React \u57fa\u7840",permalink:"/docs/react/basic"},next:{title:"router",permalink:"/docs/react/router"}},c=[{value:"Redux",id:"redux-1",children:[{value:"<code>store</code>",id:"store",children:[]},{value:"<code>Action</code>",id:"action",children:[]},{value:"<code>Reducer</code>",id:"reducer",children:[]}]},{value:"<code>Redux</code>\u91cd\u6784",id:"redux\u91cd\u6784",children:[]},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",children:[]},{value:"\u5f02\u6b65\u64cd\u4f5c",id:"\u5f02\u6b65\u64cd\u4f5c",children:[{value:"<code>applyMiddleware</code>",id:"applymiddleware",children:[]},{value:"\u540c\u6b65\u4e0e\u5f02\u6b65",id:"\u540c\u6b65\u4e0e\u5f02\u6b65",children:[]},{value:"<code>redux-thunk</code> \u4e2d\u95f4\u4ef6",id:"redux-thunk-\u4e2d\u95f4\u4ef6",children:[]},{value:"<code>redux-promise</code> \u4e2d\u95f4\u4ef6",id:"redux-promise-\u4e2d\u95f4\u4ef6",children:[]}]},{value:"\u8fdb\u9636 \u6e90\u7801",id:"\u8fdb\u9636-\u6e90\u7801",children:[{value:"<code>compose</code>",id:"compose",children:[]},{value:"<code>createStore()</code>",id:"createstore",children:[]}]},{value:"<code>React-redux</code>",id:"react-redux",children:[{value:"UI\u7ec4\u4ef6 \u5bb9\u5668\u7ec4\u4ef6",id:"ui\u7ec4\u4ef6-\u5bb9\u5668\u7ec4\u4ef6",children:[]},{value:"<code>connect</code>",id:"connect",children:[]},{value:"<code>mapStateToProps</code>",id:"mapstatetoprops",children:[]},{value:"<code>mapDispatchToProps</code>",id:"mapdispatchtoprops",children:[]},{value:"<code>&lt;Provider&gt;</code>\u7ec4\u4ef6",id:"provider\u7ec4\u4ef6",children:[]},{value:"<code>provider</code>",id:"provider",children:[]}]},{value:"TodoList \u6f14\u7ec3",id:"todolist-\u6f14\u7ec3",children:[]}],s={toc:c};function u(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"redux"},"Redux"),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Ref")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\u56fe\u96c0\u793e\u533a"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://juejin.cn/post/6844904021187117069"},"Redux \u5305\u6559\u5305\u4f1a\uff08\u4e00\uff09\uff1a\u4ecb\u7ecd Redux \u4e09\u5927\u6838\u5fc3\u6982\u5ff5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://juejin.cn/post/6844904022143434766"},"Redux \u5305\u6559\u5305\u4f1a\uff08\u4e8c\uff09\uff1a\u5f15\u5165 combineReducers \u62c6\u5206\u548c\u7ec4\u5408\u72b6\u6001\u903b\u8f91")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://juejin.cn/post/6844904037620400136"},"Redux \u5305\u6559\u5305\u4f1a\uff08\u4e09\uff09\uff1a\u4f7f\u7528\u5bb9\u5668\u7ec4\u4ef6\u548c\u5c55\u793a\u7ec4\u4ef6\u8fd1\u4e00\u6b65\u5206\u79bb\u7ec4\u4ef6\u72b6\u6001"))),(0,r.kt)("p",{parentName:"div"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/kenberkeley/redux-simple-tutorial"},"Redux \u839e\u5f0f\u6559\u7a0b")),(0,r.kt)("p",{parentName:"div"},"\u962e\u4e00\u5cf0"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html"},"Redux \u5165\u95e8\u6559\u7a0b\uff08\u4e00\uff09\uff1a\u57fa\u672c\u7528\u6cd5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_two_async_operations.html"},"Redux \u5165\u95e8\u6559\u7a0b\uff08\u4e8c\uff09\uff1a\u4e2d\u95f4\u4ef6\u4e0e\u5f02\u6b65\u64cd\u4f5c")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_three_react-redux.html"},"Redux \u5165\u95e8\u6559\u7a0b\uff08\u4e09\uff09\uff1aReact-Redux \u7684\u7528\u6cd5"))),(0,r.kt)("p",{parentName:"div"},"\u6211\u4e0d\u662f\u5916\u661f\u4eba ",(0,r.kt)("a",{parentName:"p",href:"https://juejin.cn/post/6937491452838559781"},"\u300c\u6e90\u7801\u89e3\u6790\u300d\u4e00\u6587\u5403\u900freact-redux\u6e90\u7801\uff08useMemo\u7ecf\u5178\u6e90\u7801\u7ea7\u6848\u4f8b\uff09")))),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/honjaychang/bp/fe/redux.png",alt:"redux\u539f\u7406\u56fe"})),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/honjaychang/bp/fe/20211006133544.png",alt:"img"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Redux \u4e09\u5927\u539f\u5219")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5355\u4e00\u6570\u636e\u6e90"),(0,r.kt)("li",{parentName:"ul"},"\u72b6\u6001\u662f\u53ea\u8bfb\u7684"),(0,r.kt)("li",{parentName:"ul"},"\u72b6\u6001\u4fee\u6539\u5747\u7531\u7eaf\u51fd\u6570\u5b8c\u6210")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Redux \u662f\u4e00\u4e2a\u53ef\u9884\u6d4b\u7684 JavaScript \u5e94\u7528\u72b6\u6001\u7ba1\u7406\u5bb9\u5668")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/honjaychang/bp/fe/20211005192215.jpeg",alt:"img"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"View")," - ",(0,r.kt)("strong",{parentName:"p"},"\u89c6\u56fe\u5c42"),"\t\u5c31\u662f\u5c55\u793a\u7ed9\u6700\u7ec8\u7528\u6237\u7684\u6548\u679c -> ",(0,r.kt)("inlineCode",{parentName:"p"},"React"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Store")," - ",(0,r.kt)("strong",{parentName:"p"},"\u72b6\u6001\u5bb9\u5668"),"    \u5728 Redux \u4e2d\uff0c\u72b6\u6001\u5c06\u4fdd\u5b58\u5728 Store\u91cc\u9762")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Reducers")," \u662f",(0,r.kt)("strong",{parentName:"p"},"\u8d1f\u8d23\u66f4\u65b0 Store \u4e2d\u72b6\u6001\u7684 JavaScript \u51fd\u6570")))),(0,r.kt)("h2",{id:"redux-1"},"Redux"),(0,r.kt)("h3",{id:"store"},(0,r.kt)("inlineCode",{parentName:"h3"},"store")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8de8\u7ea7\u7ec4\u4ef6\u901a\u4fe1\u8f83\u4e3a\u7e41\u7410 -> ",(0,r.kt)("inlineCode",{parentName:"li"},"store"),"\u51fa\u73b0\u4e86"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"store")," \u7684\u5b58\u5728\u65e0\u9700\u8ba9\u6bcf\u4e2a\u7ec4\u4ef6\u5355\u72ec\u4fdd\u6301\u72b6\u6001",(0,r.kt)("inlineCode",{parentName:"li"},"state"),"\uff0c\u800c\u662f\u6784\u9020\u4e00\u9897\u72b6\u6001\u6811\uff0c\u5b83\u662f\u4e00\u4e2a\u666e\u901a\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"js"),"  \u5bf9\u8c61\uff0c\u901a\u8fc7\u5bf9\u8c61\u7684\u5d4c\u5957\u6765\u7c7b\u6bd4\u7ec4\u4ef6\u7684\u5d4c\u5957\u7ec4\u5408"),(0,r.kt)("li",{parentName:"ul"},"\u6709\u4e86 ",(0,r.kt)("inlineCode",{parentName:"li"},"Redux Store")," \u4e4b\u540e\uff0c\u6240\u6709 ",(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u5e94\u7528\u4e2d\u7684\u72b6\u6001\u4fee\u6539\u90fd\u662f\u5bf9\u8fd9\u68f5 ",(0,r.kt)("inlineCode",{parentName:"li"},"js")," \u5bf9\u8c61\u6811\u7684\u4fee\u6539\uff0c\u6240\u6709\u72b6\u6001\u7684\u83b7\u53d6\u90fd\u662f\u4ece\u8fd9\u68f5",(0,r.kt)("inlineCode",{parentName:"li"},"js")," \u5bf9\u8c61\u6811\u83b7\u53d6\uff0c\u8fd9\u68f5",(0,r.kt)("inlineCode",{parentName:"li"},"js"),"  \u5bf9\u8c61\u4ee3\u8868\u7684\u72b6\u6001\u6811\u6210\u4e86\u6574\u4e2a\u5e94\u7528\u7684 ",(0,r.kt)("strong",{parentName:"li"},"\u6570\u636e\u7684\u552f\u4e00\u771f\u76f8\u6765\u6e90"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { createStore } from 'redux'\n...\nconst store = createStore(reducer, initialState) \n// store \u662f\u9760\u4f20\u5165 reducer \u751f\u6210\u7684\u54e6\uff01\n\nstore.getState() // \u83b7\u53d6\u6574\u4e2a state\nstore.dispatch(action) // \u89e6\u53d1 state \u6539\u53d8\u7684\u3010\u552f\u4e00\u9014\u5f84\u3011\nstore.subscribe(listener) // \u53ef\u4ee5\u7406\u89e3\u6210\u662f DOM \u4e2d\u7684 addEventListener\n\n// \u53ea\u8981 redux \u4e2d\u503c\u53d1\u751f\u53d8\u5316 \u65e7 render  DOM diff\nstore.subscribe(() => {\n  ReactDOM.render(<App />, document.getElementById('root'))\n})\n")),(0,r.kt)("h3",{id:"action"},(0,r.kt)("inlineCode",{parentName:"h3"},"Action")),(0,r.kt)("p",null,"\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"Redux")," \u4e2d\uff0c\u66f4\u65b0 ",(0,r.kt)("inlineCode",{parentName:"p"},"Store")," \u7684\u72b6\u6001\u6709\u4e14\u4ec5\u6709\u4e00\u79cd\u65b9\u5f0f\uff1a\u90a3\u5c31\u662f\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"dispatch")," \u51fd\u6570\uff0c\u4f20\u9012\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," \u7ed9\u8fd9\u4e2a\u51fd\u6570 \u3002"),(0,r.kt)("p",null,"\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Action")," \u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"js")," \u5bf9\u8c61\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5b83\u5305\u542b\u52a8\u4f5c\u7684\u7c7b\u578b\uff0c\u4ee5\u53ca\u66f4\u65b0\u72b6\u6001\u9700\u8981\u7684\u6570\u636e\uff0c\u5176\u4e2d ",(0,r.kt)("inlineCode",{parentName:"li"},"type")," \u662f\u5fc5\u987b\u7684"),(0,r.kt)("li",{parentName:"ul"},"\u66f4\u65b0 ",(0,r.kt)("inlineCode",{parentName:"li"},"Store")," \u72b6\u6001\uff0c\u5c31\u9700\u8981\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"dispatch")," \u51fd\u6570")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"{ type: 'ADD_TODO', payload: xxx }\n\nstore.dispatch({ type: 'ADD_TODO', payload: xxx })\n")),(0,r.kt)("h4",{id:"action-creators"},(0,r.kt)("inlineCode",{parentName:"h4"},"Action Creators")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u52a8\u4f5c\u521b\u5efa\u5668: \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"li"},"action")," \u5bf9\u8c61")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const addTodo = payload => ({\n  type: \"ADD_TODO\",\n  payload\n});\n\n// \u5f53\u6211\u4eec\u4f7f\u7528 Action Creators \u6765\u521b\u5efa Action \u4e4b\u540e\uff0c\u6211\u4eec\u518d\u60f3\u8981\u4fee\u6539 Store \u7684\u72b6\u6001\u5c31\u53d8\u6210\u4e86\u4e0b\u9762\u8fd9\u6837\uff1a\n\nstore.dispatch(addTodo('redux'))\n\n// dispatch \u540e \u90fd\u4f1a\u89e6\u53d1 reducer \u6765\u54cd\u5e94\u6267\u884c\n")),(0,r.kt)("h3",{id:"reducer"},(0,r.kt)("inlineCode",{parentName:"h3"},"Reducer")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e3a\u4e86\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"li"},"Store")," \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"State"),"\uff0c\u6211\u4eec\u9700\u8981\u5b9a\u4e49 ",(0,r.kt)("inlineCode",{parentName:"li"},"Reducers"),"\uff0c\u7528\u4e8e\u54cd\u5e94\u6211\u4eec ",(0,r.kt)("inlineCode",{parentName:"li"},"dispatch")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Action"),"\uff0c\u5e76\u6839\u636e ",(0,r.kt)("inlineCode",{parentName:"li"},"Action")," \u7684\u8981\u6c42\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"li"},"Store")," \u4e2d\u5bf9\u5e94\u7684\u6570\u636e")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"reducer")," \u662f\u4e00\u4e2a\u666e\u901a\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"js")," \u51fd\u6570\uff0c\u5b83\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"state")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"action"),"\uff0c\u524d\u8005\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"Store")," \u4e2d\u5b58\u50a8\u7684\u90a3\u68f5 ",(0,r.kt)("inlineCode",{parentName:"p"},"js")," \u5bf9\u8c61\u72b6\u6001\u6811\uff0c\u540e\u8005\u5373\u4e3a\u6211\u4eec\u5728\u7ec4\u4ef6\u4e2d ",(0,r.kt)("inlineCode",{parentName:"p"},"dispatch")," \u7684\u90a3\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"Action")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"reducer(state, action) {\n  // \u5bf9 state \u8fdb\u884c\u64cd\u4f5c\n  return newState;\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"reducer")," \u6839\u636e ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," \u7684\u6307\u793a\uff0c\u5bf9 ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," \u8fdb\u884c\u5bf9\u5e94\u7684\u64cd\u4f5c\uff0c\u7136\u540e\u8fd4\u56de\u64cd\u4f5c\u540e\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"state"),"\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Redux Store")," \u4f1a\u81ea\u52a8\u4fdd\u5b58\u8fd9\u4efd\u65b0\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"state")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"reducer")," \u5fc5\u987b\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c\u5373\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," \uff0c\u800c\u662f\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"{...}")," \u7b49\u5bf9\u8c61\u89e3\u6784\u624b\u6bb5\u8fd4\u56de\u4e00\u4e2a\u88ab\u4fee\u6539\u540e\u7684\u65b0 ",(0,r.kt)("inlineCode",{parentName:"p"},"state")),(0,r.kt)("h4",{id:"combinereducers"},(0,r.kt)("inlineCode",{parentName:"h4"},"combineReducers")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Redux")," \u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"combineReducers")," API\uff0c\u7528\u6765\u7ec4\u5408\u591a\u4e2a\u5c0f\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"reducer")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7ec4\u5408\u6240\u6709 ",(0,r.kt)("inlineCode",{parentName:"li"},"reducer")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"state"),"\uff0c\u6700\u540e\u5f62\u6210\u4e00\u9897",(0,r.kt)("inlineCode",{parentName:"li"},"js")," \u5bf9\u8c61\u72b6\u6001\u6811\uff0c\u81ea\u52a8\u5b58\u50a8\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"Redux Store")," \u91cc\u9762"),(0,r.kt)("li",{parentName:"ul"},"\u5206\u53d1 ",(0,r.kt)("inlineCode",{parentName:"li"},"dispatch")," \u7684 Action")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"combineReducers")," \u540e\u65e0\u9700\u663e\u793a\u4f20\u9012 ",(0,r.kt)("inlineCode",{parentName:"p"},"initialState")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const store = createStore(rootReducer)\n")),(0,r.kt)("h2",{id:"redux\u91cd\u6784"},(0,r.kt)("inlineCode",{parentName:"h2"},"Redux"),"\u91cd\u6784"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5b9a\u4e49 ",(0,r.kt)("inlineCode",{parentName:"li"},"Action Creators")),(0,r.kt)("li",{parentName:"ul"},"\u5b9a\u4e49 ",(0,r.kt)("inlineCode",{parentName:"li"},"Reducers")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"connect")," \u7ec4\u4ef6\u4ee5\u53ca\u5728\u7ec4\u4ef6\u4e2d ",(0,r.kt)("inlineCode",{parentName:"li"},"dispatch")," ",(0,r.kt)("inlineCode",{parentName:"li"},"Action"))),(0,r.kt)("p",null,"\u5f53\u5b9a\u4e49\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"Action"),"\uff0c\u58f0\u660e\u4e86\u54cd\u5e94 ",(0,r.kt)("inlineCode",{parentName:"p"},"Action")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Reducers")," \u4e4b\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u5b9a\u4e49 ",(0,r.kt)("inlineCode",{parentName:"p"},"React")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"Redux")," \u4ea4\u6d41\u7684\u63a5\u53e3\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"connect")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"dispatch"),"\uff0c\u524d\u8005\u8d1f\u8d23\u5c06 ",(0,r.kt)("inlineCode",{parentName:"p"},"Redux")," Store \u7684\u5185\u5bb9\u6574\u5408\u8fdb ",(0,r.kt)("inlineCode",{parentName:"p"},"React"),"\uff0c\u540e\u8005\u8d1f\u8d23\u4ece ",(0,r.kt)("inlineCode",{parentName:"p"},"React")," \u4e2d\u53d1\u51fa\u64cd\u4f5c ",(0,r.kt)("inlineCode",{parentName:"p"},"Redux Store")," \u7684\u6307\u4ee4\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/honjaychang/bp/fe/20211006095338.png",alt:"image-20211006095338072"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dispatch(action)")," \u7528\u6765\u5728 React \u7ec4\u4ef6\u4e2d\u53d1\u51fa\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"li"},"Store")," \u4e2d\u4fdd\u5b58\u72b6\u6001\u7684\u6307\u4ee4"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"reducer(state, action)")," \u7528\u6765\u6839\u636e\u8fd9\u4e00\u6307\u4ee4\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"li"},"Store")," \u4e2d\u4fdd\u5b58\u72b6\u6001\u5bf9\u5e94\u7684\u90e8\u5206"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"connect(mapStateToProps)")," \u7528\u6765\u5c06\u66f4\u65b0\u597d\u7684\u6570\u636e\u4f20\u7ed9\u7ec4\u4ef6\uff0c\u7136\u540e\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u91cd\u65b0\u6e32\u67d3\uff0c\u663e\u793a\u6700\u65b0\u7684\u72b6\u6001\u3002\u5b83\u67b6\u8bbe\u8d77 ",(0,r.kt)("inlineCode",{parentName:"li"},"Redux")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u4e4b\u95f4\u7684\u6570\u636e\u901a\u4fe1\u6865\u6881")),(0,r.kt)("h2",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"store")," \u7531 ",(0,r.kt)("inlineCode",{parentName:"li"},"Redux")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"createStore(reducer)")," \u751f\u6210"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"state")," \u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"store.getState()")," \u83b7\u53d6\uff0c\u672c\u8d28\u4e0a\u4e00\u822c\u662f\u4e00\u4e2a\u5b58\u50a8\u7740\u6574\u4e2a\u5e94\u7528\u72b6\u6001\u7684",(0,r.kt)("strong",{parentName:"li"},"\u5bf9\u8c61")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"action")," \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5305\u542b ",(0,r.kt)("inlineCode",{parentName:"li"},"type")," \u5c5e\u6027\u7684\u666e\u901a",(0,r.kt)("strong",{parentName:"li"},"\u5bf9\u8c61"),"\uff0c\u7531 ",(0,r.kt)("inlineCode",{parentName:"li"},"Action Creator "),"(",(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570"),") \u4ea7\u751f"),(0,r.kt)("li",{parentName:"ul"},"\u6539\u53d8 ",(0,r.kt)("inlineCode",{parentName:"li"},"state")," \u5fc5\u987b ",(0,r.kt)("inlineCode",{parentName:"li"},"dispatch")," \u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"action")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"reducer")," \u672c\u8d28\u4e0a\u662f\u6839\u636e ",(0,r.kt)("inlineCode",{parentName:"li"},"action.type")," \u6765\u66f4\u65b0 ",(0,r.kt)("inlineCode",{parentName:"li"},"state")," \u5e76\u8fd4\u56de ",(0,r.kt)("inlineCode",{parentName:"li"},"nextState")," \u7684",(0,r.kt)("strong",{parentName:"li"},"\u51fd\u6570")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"reducer")," \u5fc5\u987b\u8fd4\u56de\u503c\uff0c\u5426\u5219 ",(0,r.kt)("inlineCode",{parentName:"li"},"nextState")," \u5373\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"undefined")),(0,r.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u4e0a\uff0c",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"state")," \u5c31\u662f\u6240\u6709 ",(0,r.kt)("inlineCode",{parentName:"strong"},"reducer")," \u8fd4\u56de\u503c\u7684\u6c47\u603b"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Action Creator => ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," => ",(0,r.kt)("inlineCode",{parentName:"p"},"store.dispatch(action)")," => ",(0,r.kt)("inlineCode",{parentName:"p"},"reducer(state, action)")," => ",(0,r.kt)("del",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"del"},"\u539f state"))," ",(0,r.kt)("inlineCode",{parentName:"p"},"state = nextState"))),(0,r.kt)("h2",{id:"\u5f02\u6b65\u64cd\u4f5c"},"\u5f02\u6b65\u64cd\u4f5c"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4f7f\u7528\u4e2d\u95f4\u4ef6 ",(0,r.kt)("inlineCode",{parentName:"p"},"middleware")," \u8ba9 Reducer \u5728\u5f02\u6b65\u64cd\u4f5c\u7ed3\u675f\u540e\u81ea\u52a8\u6267\u884c")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4e2d\u95f4\u4ef6\u7684\u96cf\u5f62  \t\t\u4e3e\u4f8b\u6765\u8bf4\uff0c\u8981\u6dfb\u52a0\u65e5\u5fd7\u529f\u80fd")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"let next = store.dispatch;\nstore.dispatch = function dispatchAndLog(action) {\n  console.log('dispatching', action);\n  next(action);\n  console.log('next state', store.getState());\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e2d\u95f4\u4ef6\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5bf9",(0,r.kt)("inlineCode",{parentName:"li"},"store.dispatch"),"\u65b9\u6cd5\u8fdb\u884c\u4e86\u6539\u9020\uff0c\u5728\u53d1\u51fa ",(0,r.kt)("inlineCode",{parentName:"li"},"Action")," \u548c\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"li"},"Reducer")," \u8fd9\u4e24\u6b65\u4e4b\u95f4\uff0c\u6dfb\u52a0\u4e86\u5176\u4ed6\u529f\u80fd\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// \u4e13\u95e8\u7528\u4e8e\u521b\u5efa redux \u4e2d\u6700\u4e3a\u6838\u5fc3\u7684store\u5bf9\u8c61\nimport { createStore, applyMiddleware } from 'redux'\n\n// \u5f15\u5165redux-thunk \u7528\u4e8e\u652f\u6301\u5f02\u6b65action\nimport thunk from 'redux-thunk'\n\n// \u66b4\u9732 store\n// const store = c...\nexport default createStore(reducer, applyMiddleware(thunk))\n")),(0,r.kt)("h3",{id:"applymiddleware"},(0,r.kt)("inlineCode",{parentName:"h3"},"applyMiddleware")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5b83\u662f ",(0,r.kt)("inlineCode",{parentName:"li"},"Redux")," \u7684\u539f\u751f\u65b9\u6cd5\uff0c\u4f5c\u7528\u662f\u5c06\u6240\u6709\u4e2d\u95f4\u4ef6\u7ec4\u6210\u4e00\u4e2a\u6570\u7ec4\uff0c\u4f9d\u6b21\u6267\u884c"),(0,r.kt)("li",{parentName:"ul"},"\u6240\u6709\u4e2d\u95f4\u4ef6\u88ab\u653e\u8fdb\u4e86\u4e00\u4e2a\u6570\u7ec4",(0,r.kt)("inlineCode",{parentName:"li"},"chain"),"\uff0c\u7136\u540e\u5d4c\u5957\u6267\u884c\uff0c\u6700\u540e\u6267\u884c",(0,r.kt)("inlineCode",{parentName:"li"},"store.dispatch")),(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u770b\u5230\uff0c\u4e2d\u95f4\u4ef6\u5185\u90e8\uff08",(0,r.kt)("inlineCode",{parentName:"li"},"middlewareAPI"),"\uff09\u53ef\u4ee5\u62ff\u5230",(0,r.kt)("inlineCode",{parentName:"li"},"getState"),"\u548c",(0,r.kt)("inlineCode",{parentName:"li"},"dispatch"),"\u8fd9\u4e24\u4e2a\u65b9\u6cd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default function applyMiddleware(...middlewares) {\n  return (createStore) => (reducer, preloadedState, enhancer) => {\n    var store = createStore(reducer, preloadedState, enhancer);\n    var dispatch = store.dispatch;\n    var chain = [];\n\n    var middlewareAPI = {\n      getState: store.getState,\n      dispatch: (action) => dispatch(action)\n    };\n    chain = middlewares.map(middleware => middleware(middlewareAPI));\n    dispatch = compose(...chain)(store.dispatch);\n\n    return {...store, dispatch}\n  }\n}\n")),(0,r.kt)("h3",{id:"\u540c\u6b65\u4e0e\u5f02\u6b65"},"\u540c\u6b65\u4e0e\u5f02\u6b65"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u540c\u6b65\u64cd\u4f5c\u53ea\u8981\u53d1\u51fa\u4e00\u79cd Action \u5373\u53ef"),(0,r.kt)("li",{parentName:"ul"},"\u5f02\u6b65\u64cd\u4f5c\u7684\u5dee\u522b\u662f\u5b83\u8981\u53d1\u51fa\u4e09\u79cd\uff082\uff5c3\uff1f\uff09 Action",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u53d1\u8d77\u65f6\u7684 Action"),(0,r.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u6210\u529f\u65f6\u7684 Action    \uff5c    \u64cd\u4f5c\u5931\u8d25\u65f6\u7684 Action")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5f02\u6b65\u64cd\u4f5c\u7684\u601d\u8def")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'\u64cd\u4f5c\u5f00\u59cb\u65f6\uff0c\u9001\u51fa\u4e00\u4e2a Action\uff0c\u89e6\u53d1 State \u66f4\u65b0\u4e3a"\u6b63\u5728\u64cd\u4f5c"\u72b6\u6001\uff0cView \u91cd\u65b0\u6e32\u67d3'),(0,r.kt)("li",{parentName:"ul"},'\u64cd\u4f5c\u7ed3\u675f\u540e\uff0c\u518d\u9001\u51fa\u4e00\u4e2a Action\uff0c\u89e6\u53d1 State \u66f4\u65b0\u4e3a"\u64cd\u4f5c\u7ed3\u675f"\u72b6\u6001\uff0cView \u518d\u4e00\u6b21\u91cd\u65b0\u6e32\u67d3')),(0,r.kt)("h3",{id:"redux-thunk-\u4e2d\u95f4\u4ef6"},(0,r.kt)("inlineCode",{parentName:"h3"},"redux-thunk")," \u4e2d\u95f4\u4ef6"),(0,r.kt)("p",null,"\u5f02\u6b65\u64cd\u4f5c\u81f3\u5c11\u8981\u9001\u51fa\u4e24\u4e2a Action\uff1a\u7528\u6237\u89e6\u53d1\u7b2c\u4e00\u4e2a Action\uff0c\u8fd9\u4e2a\u8ddf\u540c\u6b65\u64cd\u4f5c\u4e00\u6837\uff0c\u6ca1\u6709\u95ee\u9898\uff1b\u5982\u4f55\u624d\u80fd\u5728\u64cd\u4f5c\u7ed3\u675f\u65f6\uff0c\u7cfb\u7edf\u81ea\u52a8\u9001\u51fa\u7b2c\u4e8c\u4e2a Action \u5462\uff1f"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5173\u952e\u5c31\u5728 Action Creator \u4e4b\u4e2d")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u666e\u901a\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Action Creator")," \u9ed8\u8ba4\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61 \t\u53c2\u6570\u662f Action \u7684\u5185\u5bb9"),(0,r.kt)("li",{parentName:"ul"},"\u5f02\u6b65\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Action Creator"),"  \u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570     \u4e14\u8fd4\u56de\u7684\u51fd\u6570\u7684\u53c2\u6570\u662f",(0,r.kt)("inlineCode",{parentName:"li"},"dispatch"),"\u548c",(0,r.kt)("inlineCode",{parentName:"li"},"getState"),"\u8fd9\u4e24\u4e2a Redux \u65b9\u6cd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"componentDidMount() {\n  const { dispatch, selectedPost } = this.props\n  dispatch(fetchPosts(selectedPost))\n}\n\nconst fetchPosts = postTitle => (dispatch, getState) => {\n  dispatch(requestPosts(postTitle));\n  return fetch(`/some/API/${postTitle}.json`)\n    .then(response => response.json())\n    .then(json => dispatch(receivePosts(postTitle, json)));\n  };\n};\n\n// \u4f7f\u7528\u65b9\u6cd5\u4e00\nstore.dispatch(fetchPosts('reactjs'));\n// \u4f7f\u7528\u65b9\u6cd5\u4e8c\nstore.dispatch(fetchPosts('reactjs')).then(() =>\n  console.log(store.getState())\n);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728\u8fd4\u56de\u7684\u51fd\u6570\u4e4b\u4e2d\uff0c\u5148\u53d1\u51fa\u4e00\u4e2a Action\uff08",(0,r.kt)("inlineCode",{parentName:"li"},"requestPosts(postTitle)"),"\uff09\uff0c\u8868\u793a\u64cd\u4f5c\u5f00\u59cb\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5f02\u6b65\u64cd\u4f5c\u7ed3\u675f\u4e4b\u540e\uff0c\u518d\u53d1\u51fa\u4e00\u4e2a Action\uff08",(0,r.kt)("inlineCode",{parentName:"li"},"receivePosts(postTitle, json)"),"\uff09\uff0c\u8868\u793a\u64cd\u4f5c\u7ed3\u675f\u3002")),(0,r.kt)("p",null,"\u5f02\u6b65\u64cd\u4f5c\u7684\u7b2c\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\u5c31\u662f\uff0c\u5199\u51fa\u4e00\u4e2a\u8fd4\u56de\u51fd\u6570\u7684 Action Creator\uff0c\u7136\u540e\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"redux-thunk"),"\u4e2d\u95f4\u4ef6\u6539\u9020",(0,r.kt)("inlineCode",{parentName:"p"},"store.dispatch")),(0,r.kt)("h3",{id:"redux-promise-\u4e2d\u95f4\u4ef6"},(0,r.kt)("inlineCode",{parentName:"h3"},"redux-promise")," \u4e2d\u95f4\u4ef6"),(0,r.kt)("p",null,"\u53e6\u4e00\u79cd\u5f02\u6b65\u64cd\u4f5c\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u5c31\u662f\u8ba9 Action Creator \u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { createStore, applyMiddleware } from 'redux';\nimport promiseMiddleware from 'redux-promise';\nimport reducer from './reducers';\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(promiseMiddleware)\n); \n")),(0,r.kt)("p",null,"\u60f3\u8981 Action \u5bf9\u8c61\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"payload"),"\u5c5e\u6027\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\u3002\u8fd9\u9700\u8981\u4ece",(0,r.kt)("a",{parentName:"p",href:"https://github.com/acdlite/redux-actions"},(0,r.kt)("inlineCode",{parentName:"a"},"redux-actions")),"\u6a21\u5757\u5f15\u5165",(0,r.kt)("inlineCode",{parentName:"p"},"createAction"),"\u65b9\u6cd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { createAction } from 'redux-actions';\n\nclass AsyncApp extends Component {\n  componentDidMount() {\n    const { dispatch, selectedPost } = this.props\n    // \u53d1\u51fa\u540c\u6b65 Action\n    dispatch(requestPosts(selectedPost));\n    // \u53d1\u51fa\u5f02\u6b65 Action\n    dispatch(createAction(\n      'FETCH_POSTS', \n      fetch(`/some/API/${postTitle}.json`)\n        .then(response => response.json())\n    ));\n  }\n")),(0,r.kt)("p",null,"\u7b2c\u4e8c\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"dispatch"),"\u65b9\u6cd5\u53d1\u51fa\u7684\u662f\u5f02\u6b65 Action\uff0c\u53ea\u6709\u7b49\u5230\u64cd\u4f5c\u7ed3\u675f\uff0c\u8fd9\u4e2a Action \u624d\u4f1a\u5b9e\u9645\u53d1\u51fa\u3002\u6ce8\u610f\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"createAction"),"\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5fc5\u987b\u662f\u4e00\u4e2a Promise \u5bf9\u8c61\u3002"),(0,r.kt)("h2",{id:"\u8fdb\u9636-\u6e90\u7801"},"\u8fdb\u9636 \u6e90\u7801"),(0,r.kt)("h3",{id:"compose"},(0,r.kt)("inlineCode",{parentName:"h3"},"compose")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"compose(f, g, h)(...args) => f(g(h(...args))) // reduceRight\n\nvar re1 = func3(func2(func1(0)));\n\nvar re2 = Redux.compose(func3, func2, func1)(0);\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default function compose(...funcs) {\n  if (funcs.length === 0) {\n    return arg => arg\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0]\n  }\n\n  const last = funcs[funcs.length - 1]\n  const rest = funcs.slice(0, -1)\n  return (...args) => rest.reduceRight((composed, f) => f(composed), last(...args))\n}\n\n\nexport default function compose(...funcs) {\n  if (funcs.length === 0) {\n    return arg => arg\n  }\n  if (funcs.length === 1) {\n    return funcs[0]\n  }\n  return funcs.reduce((a, b) => (...args) => a(b(...args)))\n}\n")),(0,r.kt)("h3",{id:"createstore"},(0,r.kt)("inlineCode",{parentName:"h3"},"createStore()")),(0,r.kt)("h2",{id:"react-redux"},(0,r.kt)("inlineCode",{parentName:"h2"},"React-redux")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"}," ",(0,r.kt)("inlineCode",{parentName:"p"},"store->view"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5c06 ",(0,r.kt)("inlineCode",{parentName:"li"},"Store")," \u91cc\u9762\u7684\u72b6\u6001\u4f20\u9012\u5230 ",(0,r.kt)("inlineCode",{parentName:"li"},"View")," \u4e2d\uff0c\u5177\u4f53\u6211\u4eec\u662f\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"React")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Redux")," \u7ed1\u5b9a\u5e93 ",(0,r.kt)("inlineCode",{parentName:"li"},"react-redux")," \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"connect")," \u5b9e\u73b0\u7684")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const store = createStore(rootReducer, initialState);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById("root")\n);\n\nconst mapStateToProps = (state, props) => ({\n  todos: state.todos,\n});\n\nexport default connect(mapStateToProps)(App); \n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"connect")," \u5176\u5b9e\u662f\u4e00\u4e2a\u9ad8\u9636\u51fd\u6570\u3002\u8fd9\u91cc ",(0,r.kt)("inlineCode",{parentName:"p"},"connect")," \u901a\u8fc7\u63a5\u6536 ",(0,r.kt)("inlineCode",{parentName:"p"},"mapStateToProps")," \u7136\u540e\u8c03\u7528\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\uff0c\u63a5\u7740\u8fd9\u4e2a\u65b0\u51fd\u6570\u518d\u63a5\u6536 ",(0,r.kt)("inlineCode",{parentName:"p"},"App")," \u7ec4\u4ef6\u4f5c\u4e3a\u53c2\u6570\uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"mapStateToProps")," \u6ce8\u5165 ",(0,r.kt)("inlineCode",{parentName:"p"},"todos"),"\u5c5e\u6027\uff0c\u6700\u540e\u8fd4\u56de\u6ce8\u5165\u540e\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"App")," \u7ec4\u4ef6\u3002"),(0,r.kt)("p",null,"\u8fd9\u91cc\u4e4b\u6240\u4ee5\u6211\u4eec\u80fd\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"App")," \u7ec4\u4ef6\u4e2d\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"mapStateToProps")," \u62ff\u5230 Store \u4e2d\u4fdd\u5b58\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"js"),"  \u5bf9\u8c61\u72b6\u6001\u6811\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u5728\u4e4b\u524d\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"Provider")," \u5305\u88f9\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"App")," \u7ec4\u4ef6\uff0c\u5e76\u5c06 ",(0,r.kt)("inlineCode",{parentName:"p"},"store")," \u4f5c\u4e3a\u5c5e\u6027\u4f20\u9012\u7ed9\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"Provider"),"\u3002"),(0,r.kt)("h3",{id:"ui\u7ec4\u4ef6-\u5bb9\u5668\u7ec4\u4ef6"},"UI\u7ec4\u4ef6 \u5bb9\u5668\u7ec4\u4ef6"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"UI \u7ec4\u4ef6\u8d1f\u8d23 UI \u7684\u5448\u73b0\uff0c\u5bb9\u5668\u7ec4\u4ef6\u8d1f\u8d23\u7ba1\u7406\u6570\u636e\u548c\u903b\u8f91")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/honjaychang/bp/fe/20211006144456.png",alt:"image-20211006144456292"})),(0,r.kt)("h3",{id:"connect"},(0,r.kt)("inlineCode",{parentName:"h3"},"connect")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7528\u4e8e\u4ece UI \u7ec4\u4ef6\u751f\u6210\u5bb9\u5668\u7ec4\u4ef6")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { connect } from 'react-redux'\nconst VisibleTodoList = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TodoList)\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mapStateToProps"),"\t\u8f93\u5165\u903b\u8f91\uff1a\u5c06",(0,r.kt)("inlineCode",{parentName:"li"},"state"),"\u6620\u5c04\u5230 UI \u7ec4\u4ef6\u7684\u53c2\u6570\uff08",(0,r.kt)("inlineCode",{parentName:"li"},"props"),"\uff09"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mapDispatchToProps"),"    \u8f93\u51fa\u903b\u8f91\uff1a\u5c06\u7528\u6237\u5bf9 UI \u7ec4\u4ef6\u7684\u64cd\u4f5c\u6620\u5c04\u6210 Action")),(0,r.kt)("h3",{id:"mapstatetoprops"},(0,r.kt)("inlineCode",{parentName:"h3"},"mapStateToProps")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const mapStateToProps = (state) => {\n  return {\n    todos: getVisibleTodos(state.todos, state.visibilityFilter)\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mapStateToProps"),"\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u63a5\u53d7",(0,r.kt)("inlineCode",{parentName:"li"},"state"),"\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mapStateToProps"),"\u4f1a\u8ba2\u9605 Store\uff0c\u6bcf\u5f53",(0,r.kt)("inlineCode",{parentName:"li"},"state"),"\u66f4\u65b0\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\uff0c\u91cd\u65b0\u8ba1\u7b97 UI \u7ec4\u4ef6\u7684\u53c2\u6570\uff0c\u4ece\u800c\u89e6\u53d1 UI \u7ec4\u4ef6\u7684\u91cd\u65b0\u6e32\u67d3\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mapStateToProps"),"\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u603b\u662f",(0,r.kt)("inlineCode",{parentName:"li"},"state"),"\u5bf9\u8c61\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u4ee3\u8868\u5bb9\u5668\u7ec4\u4ef6\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"props"),"\u5bf9\u8c61\u3002")),(0,r.kt)("p",null,"\u8fd9\u4e2a\u5bf9\u8c61\u6709\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"todos"),"\u5c5e\u6027\uff0c\u4ee3\u8868 UI \u7ec4\u4ef6\u7684\u540c\u540d\u53c2\u6570\uff0c\u540e\u9762\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"getVisibleTodos"),"\u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u53ef\u4ee5\u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"state"),"\u7b97\u51fa ",(0,r.kt)("inlineCode",{parentName:"p"},"todos")," \u7684\u503c\u3002  ",(0,r.kt)("inlineCode",{parentName:"p"},"(reducer???)")),(0,r.kt)("h3",{id:"mapdispatchtoprops"},(0,r.kt)("inlineCode",{parentName:"h3"},"mapDispatchToProps")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5bf9\u8c61"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4f1a\u5f97\u5230",(0,r.kt)("inlineCode",{parentName:"li"},"dispatch"),"\u548c",(0,r.kt)("inlineCode",{parentName:"li"},"ownProps"),"\uff08\u5bb9\u5668\u7ec4\u4ef6\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"props"),"\u5bf9\u8c61\uff09\u8fd9\u4e24\u4e2a\u53c2\u6570")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const mapDispatchToProps = (\n  dispatch,\n  ownProps\n) => {\n  return {\n    onClick: () => {\n      dispatch({\n        type: 'SET_VISIBILITY_FILTER',\n        filter: ownProps.filter\n      });\n    }\n  };\n}\n\nconst mapDispatchToProps = {\n  onClick: (filter) => {\n    type: 'SET_VISIBILITY_FILTER',\n    filter: filter\n  };\n}\n")),(0,r.kt)("h3",{id:"provider\u7ec4\u4ef6"},(0,r.kt)("inlineCode",{parentName:"h3"},"<Provider>"),"\u7ec4\u4ef6"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"connect"),"\u65b9\u6cd5\u751f\u6210\u5bb9\u5668\u7ec4\u4ef6\u4ee5\u540e\uff0c\u9700\u8981\u8ba9\u5bb9\u5668\u7ec4\u4ef6\u62ff\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"state"),"\u5bf9\u8c61\uff0c\u624d\u80fd\u751f\u6210 UI \u7ec4\u4ef6\u7684\u53c2\u6570\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"React-Redux")," \u63d0\u4f9b",(0,r.kt)("inlineCode",{parentName:"p"},"Provider"),"\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u8ba9\u5bb9\u5668\u7ec4\u4ef6\u62ff\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"state")),(0,r.kt)("p",null,"\u901a\u8fc7\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Provider"),"\u5728\u6839\u7ec4\u4ef6\u5916\u9762\u5305\u4e86\u4e00\u5c42\uff0c\u8fd9\u6837\u4e00\u6765\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"App"),"\u7684\u6240\u6709\u5b50\u7ec4\u4ef6\u5c31\u9ed8\u8ba4\u90fd\u53ef\u4ee5\u62ff\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"state"),"\u4e86\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport reducer from './reducers'\nimport App from './components/App'\n\nlet store = createStore(reducer);\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n")),(0,r.kt)("h3",{id:"provider"},(0,r.kt)("inlineCode",{parentName:"h3"},"provider")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"/* provider \u7ec4\u4ef6\u4ee3\u7801 */\nfunction Provider({ store, context, children }) {\n   /* \u5229\u7528useMemo\uff0c\u8ddf\u636estore\u53d8\u5316\u521b\u5efa\u51fa\u4e00\u4e2acontextValue \u5305\u542b\u4e00\u4e2a\u6839\u5143\u7d20\u8ba2\u9605\u5668\u548c\u5f53\u524dstore  */ \n  const contextValue = useMemo(() => {\n      /* \u521b\u5efa\u4e86\u4e00\u4e2a\u6839 Subscription \u8ba2\u9605\u5668 */\n    const subscription = new Subscription(store)\n    /* subscription \u7684 notifyNestedSubs \u65b9\u6cd5 \uff0c\u8d4b\u503c\u7ed9  onStateChange\u65b9\u6cd5 */\n    subscription.onStateChange = subscription.notifyNestedSubs  \n    return {\n      store,\n      subscription\n    } /*  store \u6539\u53d8\u521b\u5efa\u65b0\u7684contextValue */\n  }, [store])\n  /*  \u83b7\u53d6\u66f4\u65b0\u4e4b\u524d\u7684state\u503c \uff0c\u51fd\u6570\u7ec4\u4ef6\u91cc\u9762\u7684\u4e0a\u4e0b\u6587\u8981\u4f18\u5148\u4e8e\u7ec4\u4ef6\u66f4\u65b0\u6e32\u67d3  */\n  const previousState = useMemo(() => store.getState(), [store])\n\n  useEffect(() => {\n    const { subscription } = contextValue\n    /* \u89e6\u53d1trySubscribe\u65b9\u6cd5\u6267\u884c\uff0c\u521b\u5efalistens */\n    subscription.trySubscribe() // \u53d1\u8d77\u8ba2\u9605\n    if (previousState !== store.getState()) {\n        /* \u7ec4\u4ef6\u66f4\u65b0\u6e32\u67d3\u4e4b\u540e\uff0c\u5982\u679c\u6b64\u65f6state\u53d1\u751f\u6539\u53d8\uff0c\u90a3\u4e48\u7acb\u5373\u89e6\u53d1 subscription.notifyNestedSubs \u65b9\u6cd5  */\n      subscription.notifyNestedSubs() \n    }\n    /*   */\n    return () => {\n      subscription.tryUnsubscribe()  // \u5378\u8f7d\u8ba2\u9605\n      subscription.onStateChange = null\n    }\n    /*  contextValue state \u6539\u53d8\u51fa\u53d1\u65b0\u7684 effect */\n  }, [contextValue, previousState])\n\n  const Context = context || ReactReduxContext\n  /*  context \u5b58\u5728\u7528\u8ddf\u5143\u7d20\u4f20\u8fdb\u6765\u7684context \uff0c\u5982\u679c\u4e0d\u5b58\u5728 createContext\u521b\u5efa\u4e00\u4e2acontext  \uff0c\u8fd9\u91cc\u7684ReactReduxContext\u5c31\u662f\u7531createContext\u521b\u5efa\u51fa\u7684context */\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>\n}\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"1 ",(0,r.kt)("inlineCode",{parentName:"strong"},"react-redux")," \u4e2d\u7684 ",(0,r.kt)("inlineCode",{parentName:"strong"},"provider")," \u4f5c\u7528 \uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"strong"},"react")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"strong"},"context")," \u4f20\u9012 ",(0,r.kt)("inlineCode",{parentName:"strong"},"subscription")," \u548c ",(0,r.kt)("inlineCode",{parentName:"strong"},"redux")," \u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"strong"},"store"),"  ,\u5e76\u4e14\u5efa\u7acb\u4e86\u4e00\u4e2a\u6700\u9876\u90e8\u6839 ",(0,r.kt)("inlineCode",{parentName:"strong"},"Subscription")," \u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"2 ",(0,r.kt)("inlineCode",{parentName:"strong"},"Subscription")," \u7684\u4f5c\u7528\uff1a\u8d77\u5230\u53d1\u5e03\u8ba2\u9605\u4f5c\u7528\uff0c\u4e00\u65b9\u9762\u8ba2\u9605 ",(0,r.kt)("inlineCode",{parentName:"strong"},"connect")," \u5305\u88f9\u7ec4\u4ef6\u7684\u66f4\u65b0\u51fd\u6570\uff0c\u4e00\u65b9\u9762\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"strong"},"store.subscribe")," \u7edf\u4e00\u6d3e\u53d1\u66f4\u65b0\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"3 ",(0,r.kt)("inlineCode",{parentName:"strong"},"Subscription")," \u5982\u679c\u5b58\u5728\u8fd9\u7236\u7ea7\u7684\u60c5\u51b5\uff0c\u4f1a\u628a\u81ea\u8eab\u7684\u66f4\u65b0\u51fd\u6570\uff0c\u4f20\u9012\u7ed9\u7236\u7ea7 ",(0,r.kt)("inlineCode",{parentName:"strong"},"Subscription")," \u6765\u7edf\u4e00\u8ba2\u9605\u3002")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u4e0b\u9762\u5148\u7559\u7740\u5427\u3002\u867d\u7136\u6ca1\u5565\u7528")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"01 - redux\u5b8c\u6574\u7248;\n\nthis.setState({ count: count + value });\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"- redux\n    - actions\n        - count.js\n    - reducers\n        - count.js\n    - store.js\n  - constant.js\n\n// \u8be5\u6a21\u5757\u7528\u4e8e\u5b9a\u4e49action\u5bf9\u8c61\u4e2dtype\u7c7b\u578b\u7684\u5e38\u91cf\u503c\nexport const INCREMENT = 'increment'\n\n\n// Count/index.js\n// store.dispatch({type: 'increment', data: value})\nstore.dispatch(createIncrementAction(value))\n\nstore.getState() VS \u4e4b\u524d\u7684this.state.count\n\n// index.js\n// \u53ea\u8981 redux \u4e2d\u503c\u53d1\u751f\u53d8\u5316 \u65e7 render  DOM diff\nstore.subscribe(() => {\n  ReactDOM.render(<App />, document.getElementById('root'))\n})\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"action")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// action\u6587\u4ef6\u4e13\u95e8\u4e3a count\u7ec4\u4ef6 \u521b\u5efa action\u5bf9\u8c61\nimport { INCREMENT } from './constant';\nexport const createIncrementAction = data => ({ type: INCREMENT, data });\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"reducer")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// redux/reducer \u6587\u4ef6\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u4e3aCount\u7ec4\u4ef6\u670d\u52a1\u7684reducer\n// reducer \u672c\u8d28\u662f\u4e00\u4e2a\u51fd\u6570 \u4f1a\u63a5\u5230\u4e24\u4e2a\u53c2\u6570 \u5206\u522b\u4e3a \u4e4b\u524d\u7684\u72b6\u6001 preState \u52a8\u4f5c\u5bf9\u8c61 action\nimport { INCREMENT } from './constant';\nconst initState = 0;\n// \u901a\u8fc7\u9ed8\u8ba4\u503c \u6765\u907f\u514d\u521d\u59cb\u5316\u4e3aundefined\u7684\u60c5\u51b5\nfunction countReducer(preState = initState, action) {\n  // \u4ece action\u5bf9\u8c61\u4e2d\u83b7\u53d6 type\u3001data\n  const { type, data } = action;\n  // \u6839\u636etype\u51b3\u5b9a\u5982\u4f55\u52a0\u5de5\u6570\u636e\n  switch (type) {\n    case INCREMENT:\n      return preState + data;\n    default:\n      return preState;\n  }\n}\nexport default countReducer;\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"store")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// store.js \u6587\u4ef6\u4e13\u95e8\u7528\u4e8e\u66b4\u9732\u4e00\u4e2astore\u5bf9\u8c61\n\n// \u4e13\u95e8\u7528\u4e8e\u521b\u5efa redux \u4e2d\u6700\u4e3a\u6838\u5fc3\u7684store\u5bf9\u8c61\nimport { createStore } from 'redux';\n// \u5f15\u5165\u4e3aCount\u7ec4\u4ef6\u670d\u52a1\u7684reducer\nimport countReducer from './count_reducer';\n\n// \u66b4\u9732 store\nexport default createStore(countReducer);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"02 - redux\u5f02\u6b65action;\n\n// action \u53ef\u4ee5\u662fObject\uff08\u540c\u6b65\uff09  \u6216\u8005  function\uff08\u5f02\u6b65action\uff09\n\n// \u5f02\u6b65 action \u7684\u503c\u4e3a\u51fd\u6570  \u9700\u8981\u4e00\u4e2a\u4e2d\u95f4\u4ef6 \u4ea4\u7ed9store\u76f4\u63a5\u6267\u884c\u4e00\u4e0b\uff08\u65e0\u9700\u4ea4\u7ed9reducer\uff09\nexport const createIncrementAsyncAction = (data, time) => {\n  // return ()=>{\n  return dispatch => {\n    setTimeout(() => {\n      // store.dispatch({ type: INCREMENT, data })\n      // \u53ef\u4ee5\u4e0d\u7528\u81ea\u5df1\u5199 \u8c03\u7528\u540c\u6b65\u7684action\n      // store.dispatch(createIncrementAction(data))\n      // \u5f02\u6b65action \u4e00\u822c\u90fd\u4f1a\u8c03\u7528\u540c\u6b65action  \u5f02\u6b65action\u4e0d\u662f\u5fc5\u8981\u7684\n      dispatch(createIncrementAction(data));\n    }, time);\n  };\n};\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"react-redux")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"App.js\n// \u5f15\u5165containers \u4e0b\u7684 \u5bb9\u5668\u7ec4\u4ef6\nimport Count from './containers/Count'\nimport store from './redux/store'\n<Count store={store} />\n\n\n\n\nstore.js\n\n// \u4e13\u95e8\u7528\u4e8e\u521b\u5efa redux \u4e2d\u6700\u4e3a\u6838\u5fc3\u7684store\u5bf9\u8c61\nimport { createStore, applyMiddleware } from 'redux'\n// \u5f15\u5165\u4e3aCount\u7ec4\u4ef6\u670d\u52a1\u7684reducer\nimport countReducer from './count_reducer'\n\n// \u5f15\u5165redux-thunk \u7528\u4e8e\u652f\u6301\u5f02\u6b65action\nimport thunk from 'redux-thunk'\n\n// \u66b4\u9732 store\nexport default createStore(countReducer, applyMiddleware(thunk))\n\n\n\n\n\u5bb9\u5668\u7ec4\u4ef6    UI\u7ec4\u4ef6\n\n// \u5f15\u5165Count\u7ec4\u4ef6\u7684UI\u7ec4\u4ef6\nimport CountUI from '../../components/Count'\nimport {\n  createIncrementAction,\n} from '../../redux/count_action'\n/**\n * \u5f15\u5165 Redux \u91cc\u6700\u6838\u5fc3\u7684store\n * // import store from '../../redux/store'\n * \u4f46\u662f store \u4e0d\u80fd\u81ea\u5df1\u5f15\u5165 \u9700\u8981\u901a\u8fc7props \u4f20\u9012\n */\n\n// \u5f15\u5165 connect  \u7528\u4e8e\u94fe\u63a5UI\u7ec4\u4ef6\u4e0eredux\nimport { connect } from 'react-redux'\n\n/**\n * 1\u3001mapStateToProps \u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\n * 2\u3001\u8fd4\u56de\u5bf9\u8c61\u4e2d\u7684key\u5c31\u4f5c\u4e3a\u4f20\u9012\u7ed9UI\u7ec4\u4ef6props\u7684key value\u5c31\u4f5c\u4e3a\u4f20\u9012\u7ed9UI\u7ec4\u4ef6props\u7684value\uff08\u72b6\u6001\uff09\n * 3\u3001mapStateToProps \u7528\u4e8e\u4f20\u9012\u72b6\u6001\n */\nconst mapStateToProps = (state) => ({ count: state })\n/**\n * 1\u3001mapDispatchToProps \u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\n * 2\u3001\u8fd4\u56de\u5bf9\u8c61\u4e2d\u7684key\u5c31\u4f5c\u4e3a\u4f20\u9012\u7ed9UI\u7ec4\u4ef6props\u7684key value\u5c31\u4f5c\u4e3a\u4f20\u9012\u7ed9UI\u7ec4\u4ef6props\u7684value\n * 3\u3001mapDispatchToProps \u7528\u4e8e\u5b8c\u6210 \u64cd\u4f5c\u72b6\u6001\u7684\u65b9\u6cd5\n */\nconst mapDispatchToProps = (dispatch) => {\n  // \u901a\u77e5redux\u6267\u884c\u52a0\u6cd5\n  return {\n    increment: (number) => dispatch(createIncrementAction(number)),\n  }\n}\n\n/**\n * \u4f7f\u7528connect()()  \u521b\u5efa\u66b4\u9732    \u5efa\u7acb\u8fde\u63a5   connect \u5f62\u6210 \u7236\u5b50\u7ec4\u4ef6\u5173\u7cfb\n * connect \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e24\u4e2a\u51fd\u6570  \u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f5c\u4e3a\u72b6\u6001\u4f20\u9012\u7ed9\u4e86UI\u7ec4\u4ef6\n */\nexport default connect(mapStateToProps, mapDispatchToProps)(CountUI)\n\n\n\nthis.props.increasement(value)\n")),(0,r.kt)("p",null,"\u4f18\u5316 ",(0,r.kt)("inlineCode",{parentName:"p"},"dispatch")," ",(0,r.kt)("inlineCode",{parentName:"p"},"provider")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"export default connect(\n  (state) => ({ count: state }),\n  // mapDispatchToProps \u7b80\u5199 react-redux \u4f1a\u5e2e\u4f60dispatch\n  {\n    increment: createIncrementAction,\n    decrement: createDecrementAction,\n    incrementAsync: createIncrementAsyncAction,\n  }\n)(CountUI)\n\n\n\n\n// \u901a\u8fc7 react-redux \u5c31\u4e0d\u9700\u8981\u518d\u6b21\u76d1\u6d4b  \u5bb9\u5668\u7ec4\u4ef6\u5df2\u7ecf\u5177\u5907\u76d1\u6d4b\u76d1\u6d4b\u80fd\u529b\n<Provider store={store}>\n  <App />\n</Provider>\n\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import { composeWithDevTools } from 'redux-devtools-extension';\n\n// \u66b4\u9732 store\nexport default createStore(\n  allReducers,\n  composeWithDevTools(applyMiddleware(thunk))\n);\n\n// \u8be5\u6587\u4ef6\u7528\u6765\u6c47\u603b\u6240\u6709\u7684reducer\n\nimport count from './count';\nimport persons from './person';\n\nimport { combineReducers } from 'redux';\n\n// \u6c47\u603b\u6240\u6709\u7684reducers\nexport const allReducers = combineReducers({\n  count: count,\n  persons: persons,\n});\n")),(0,r.kt)("p",null,"\u5185\u90e8\u8fd0\u884c\u673a\u5236 \u8bbe\u8ba1\u539f\u7406"),(0,r.kt)("p",null,"\u6570\u636e\u9a71\u52a8\u66f4\u65b0"),(0,r.kt)("h2",{id:"todolist-\u6f14\u7ec3"},"TodoList \u6f14\u7ec3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"-src -\n  components -\n  Item -\n  index.jsx -\n  List -\n  index.jsx -\n  redux -\n  actions.js -\n  reducers.js -\n  store.js -\n  constant.js -\n  App.js -\n  index.js;\n")),(0,r.kt)("h4",{id:"basic"},"Basic"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"index.js"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"App.js"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport List from './components/List';\nfunction App() {\n  return (\n    <React.Fragment>\n      <List />\n    </React.Fragment>\n  );\n}\n\nexport default App;\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"List/index.jsx"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React, { Component } from 'react';\nimport Item from '../Item';\n\nlet uid = 3;\nexport default class List extends Component {\n  addTodo = e => {\n    // const { todos } = this.state;\n    if (e.keyCode !== 13) return;\n    const newTodo = { id: uid++, value: e.target.value };\n    this.setState({ todos: [newTodo, ...this.state.todos] });\n    e.target.value = '';\n  };\n  deleteTodo = id => {\n    const { todos } = this.state;\n    const newTodos = todos.filter(todo => todo.id !== id);\n    this.setState({ todos: newTodos });\n  };\n\n  render() {\n    const { todos } = this.state;\n    return (\n      <React.Fragment>\n        <h5>Todo List</h5>\n        <input onKeyUp={this.addTodo} />\n        {todos.map(todo => {\n          return <Item key={todo.id} {...todo} deleteTodo={this.deleteTodo} />;\n        })}\n      </React.Fragment>\n    );\n  }\n}\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"Item/index.jsx"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React, { Component } from 'react';\n\nexport default class Item extends Component {\n  deleteItem = id => {\n    this.props.deleteTodo(id);\n  };\n  render() {\n    const { id, value } = this.props;\n    return (\n      <React.Fragment>\n        <li onClick={() => this.deleteItem(id)}>{value}</li>\n      </React.Fragment>\n    );\n  }\n}\n")),(0,r.kt)("h4",{id:"redux-2"},"Redux"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"index.js")," ",(0,r.kt)("inlineCode",{parentName:"p"},"add..."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import store from './redux/store';\n\n//\nstore.subscribe(() =>\n  ReactDOM.render(<App />, document.getElementById('root'))\n);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"App.js"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"List/index.jsx"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React, { Component } from 'react';\nimport Item from '../Item';\nimport {\n  addTodoAction,\n  deleteTodo,\n  countAdd,\n  countAddAsync,\n} from '../../redux/actions';\nimport store from '../../redux/store';\n\nlet uid = 3;\nexport default class List extends Component {\n  addTodo = e => {\n    if (e.keyCode !== 13) return;\n    const newTodo = { id: uid++, value: e.target.value };\n    store.dispatch(addTodoAction(newTodo));\n    e.target.value = '';\n  };\n  deleteTodo = id => {\n    store.dispatch(deleteTodo(id));\n  };\n\n  plus = num => {\n    store.dispatch(countAdd(num));\n  };\n  asyncPlus = num => {\n    store.dispatch(countAddAsync(num, 1000));\n  };\n\n  render() {\n    const todos = store.getState().todossss;\n    const num = store.getState().count;\n    return (\n      <React.Fragment>\n        <h5>Todo List</h5>\n        <input onKeyUp={this.addTodo} />\n        {todos.map(todo => {\n          return <Item key={todo.id} {...todo} deleteTodo={this.deleteTodo} />;\n        })}\n        <h5>counter: {num}</h5>\n        <button onClick={() => this.plus(num)}>Plus</button>\n        <button onClick={() => this.asyncPlus(num)}>Plus Async</button>\n      </React.Fragment>\n    );\n  }\n}\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"Item/index.jsx"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"constant.js"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export const ADD_TODO = 'addTodo';\nexport const DELETE_TODO = 'deleteTodo';\n\nexport const COUNT_ADD = 'countAdd';\nexport const COUNT_ADD_ASYNC = 'countAddAsync';\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"action.js"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { ADD_TODO, DELETE_TODO, COUNT_ADD } from './constant';\n\n// action \u521b\u5efa\u51fd\u6570 \u7b80\u5199 + \u975e\u7b80\u5199\n// \u901a\u8fc7 action \u521b\u5efa\u51fd\u6570 addTodoAction \u6765\u521b\u5efa action ADD_TODO\nexport function addTodoAction(todo) {\n  return { type: ADD_TODO, todo };\n}\n\nexport const deleteTodo = id => ({ type: DELETE_TODO, id });\n\nexport const countAdd = num => ({ type: COUNT_ADD, num });\nexport const countAddAsync = (num, delay) => {\n  // return () => {\n  //   setTimeout(() =>{\n  //     store.dispatch({ type: ADD_ADD_ASYNC, num})\n  //   },delay);\n  // }\n  return dispatch => {\n    setTimeout(() => {\n      dispatch(countAdd(num));\n    }, delay);\n  };\n};\n\n// dispatch(deleteTodo(id))\n\n// \u521b\u5efa\u4e00\u4e2a \u88ab\u7ed1\u5b9a\u7684 action \u521b\u5efa\u51fd\u6570 \u6765\u81ea\u52a8 dispatch\n// const boundDeleteTodo = id => dispatch(deleteTodo(id))\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"reducers.js"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { ADD_TODO, DELETE_TODO, COUNT_ADD } from './constant';\n\nconst initState = {\n  todos: [\n    { id: 1, value: 'abc' },\n    { id: 2, value: 'cba' },\n  ],\n  count: 0,\n};\n\nexport const todoReducer = (state = initState.todos, action) => {\n  switch (action.type) {\n    case ADD_TODO:\n      // return { todos: [action.todo, ...state.todos] };\n      return [action.todo, ...state];\n    case DELETE_TODO:\n      // return { todos: state.todos.filter(todo => todo.id !== action.id) };\n      return state.filter(todo => todo.id !== action.id);\n    default:\n      return state;\n  }\n};\n\nexport const count = (state = initState.count, action) => {\n  switch (action.type) {\n    case COUNT_ADD:\n      const count = action.num + 1;\n      return count;\n    default:\n      return state;\n  }\n};\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"store.js"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { todoReducer, count } from './reducers';\n// \u5f15\u5165redux-thunk \u7528\u4e8e\u652f\u6301\u5f02\u6b65action\nimport thunk from 'redux-thunk';\n\nconst allReducers = combineReducers({ todossss: todoReducer, count });\n\nexport default createStore(allReducers, applyMiddleware(thunk));\n")),(0,r.kt)("h4",{id:"react-redux-1"},"React-redux"),(0,r.kt)("p",null,"\u533a\u5206\u5bb9\u5668\u7ec4\u4ef6",(0,r.kt)("inlineCode",{parentName:"p"},"containers"),"\u548c UI \u7ec4\u4ef6",(0,r.kt)("inlineCode",{parentName:"p"},"components")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"react-redux")," \u91cc\u9762\u7684 store \u9700\u8981\u81ea\u5df1 \u81ea\u5df1\u901a\u8fc7 props \u4f20\u9012"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"index.js")," ",(0,r.kt)("inlineCode",{parentName:"p"},"add..."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from './redux/store';\nimport { Provider } from 'react-redux';\n\n// \u901a\u8fc7\u5728index.js\u4e2d\u7ed9App\u7ec4\u4ef6 \u901a\u8fc7Provider \u4f20\u9012props store \u6765\u907f\u514d\u7ed9\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u8981\u4f20\u9012\n// \u901a\u8fc7 react-redux \u5c31\u4e0d\u9700\u8981\u518d\u6b21\u76d1\u6d4b  \u5bb9\u5668\u7ec4\u4ef6\u5df2\u7ecf\u5177\u5907\u76d1\u6d4b\u76d1\u6d4b\u80fd\u529b\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"App.js"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"List/index.jsx"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React, { Component } from 'react';\nimport Item from '../Item';\nimport {\n  addTodoAction,\n  deleteTodo,\n  countAdd,\n  countAddAsync,\n} from '../../redux/actions';\n\n// \u5f15\u5165 connect  \u7528\u4e8e\u94fe\u63a5UI\u7ec4\u4ef6\u4e0eredux\nimport { connect } from 'react-redux';\n\nlet uid = 3;\nclass List extends Component {\n  addTodo = e => {\n    if (e.keyCode !== 13) return;\n    const newTodo = { id: uid++, value: e.target.value };\n    this.props.addTodoAction(newTodo);\n    e.target.value = '';\n  };\n  deleteTodo = id => {\n    this.props.deleteTodo(id);\n  };\n  plus = num => {\n    // console.log(num);\n    this.props.countAdd(num);\n  };\n\n  asyncPlus = num => {\n    this.props.countAddAsync(num, 1000);\n  };\n\n  render() {\n    const todos = this.props.todos;\n    const num = this.props.count;\n    return (\n      <React.Fragment>\n        <h5>Todo List</h5>\n        <input onKeyUp={this.addTodo} />\n        {todos.map(todo => {\n          return <Item key={todo.id} {...todo} deleteTodo={this.deleteTodo} />;\n        })}\n        <h5>counter: {num}</h5>\n        <button onClick={() => this.plus(num)}>Plus</button>\n        <button onClick={() => this.asyncPlus(num)}>Plus Async</button>\n      </React.Fragment>\n    );\n  }\n}\nexport default connect(\n  state => ({ todos: state.todossss, count: state.count }),\n  {\n    addTodoAction: addTodoAction,\n    deleteTodo: deleteTodo,\n    countAdd: countAdd,\n    countAddAsync: countAddAsync,\n  }\n)(List);\n\n\n\n// \ud83d\udc46\u4e0a\u9762\u662f\u7b80\u5199\n/**\n * 1\u3001mapStateToProps \u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61  \u7528\u4e8e\u4f20\u9012\u72b6\u6001\n * 2\u3001\u8fd4\u56de\u5bf9\u8c61\u4e2d\u7684key\u5c31\u4f5c\u4e3a\u4f20\u9012\u7ed9UI\u7ec4\u4ef6props\u7684key value\u5c31\u4f5c\u4e3a\u4f20\u9012\u7ed9UI\u7ec4\u4ef6props\u7684value\uff08\u72b6\u6001\uff09\n */\nconst mapStateToProps = state => ({\n  todos: state.todossss,\n  count: state.count,\n});\n/**\n * 1\u3001mapStateToProps \u51fd\u6570\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61  \u7528\u4e8e\u5b8c\u6210 \u64cd\u4f5c\u72b6\u6001\u7684\u65b9\u6cd5\n * 2\u3001\u8fd4\u56de\u5bf9\u8c61\u4e2d\u7684key\u5c31\u4f5c\u4e3a\u4f20\u9012\u7ed9UI\u7ec4\u4ef6props\u7684key value\u5c31\u4f5c\u4e3a\u4f20\u9012\u7ed9UI\u7ec4\u4ef6props\u7684value\n */\nconst mapDispatchToProps = dispatch => {\n  // \u901a\u77e5redux\u6267\u884c\n  return {\n    addTodoAction: todoObj => dispatch(addTodoAction(todoObj)),\n    deleteTodo: id => dispatch(deleteTodo(id)),\n    countAdd: number => dispatch(countAdd(number)),\n    countAddAsync: (number, delay) => dispatch(countAddAsync(number, delay)),\n  };\n};\n\n/**\n * \u4f7f\u7528connect()()  \u521b\u5efa\u66b4\u9732    \u5efa\u7acb\u8fde\u63a5   connect \u5f62\u6210 \u7236\u5b50\u7ec4\u4ef6\u5173\u7cfb\n * connect \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e24\u4e2a\u51fd\u6570  \u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f5c\u4e3a\u72b6\u6001\u4f20\u9012\u7ed9\u4e86UI\u7ec4\u4ef6\n */\nexport default connect(mapStateToProps, mapDispatchToProps)(List);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"Item/index.jsx"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"constant.js"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"action.js"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"reducers.js"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"store.js"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { todoReducer, count } from './reducers';\n// \u5f15\u5165redux-thunk \u7528\u4e8e\u652f\u6301\u5f02\u6b65action\nimport thunk from 'redux-thunk';\n\nconst allReducers = combineReducers({ todossss: todoReducer, count });\n\nexport default createStore(allReducers, applyMiddleware(thunk));\n")),(0,r.kt)("h4",{id:"hook"},"Hook"))}u.isMDXComponent=!0}}]);